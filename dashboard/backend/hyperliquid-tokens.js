// hyperliquid-tokens.js
// Mapping des spot indices Hyperliquid vers les noms de tokens
// Dernière mise à jour: 2025-12-18

const HYPERLIQUID_TOKENS = {
  0: 'PURR',
  1: 'HFUN',
  2: 'LICK',
  3: 'MANLET',
  4: 'JEFF',
  5: 'SIX',
  6: 'WAGMI',
  7: 'CAPPY',
  8: 'POINTS',
  9: 'TRUMP',
  10: 'GMEOW',
  11: 'PEPE',
  12: 'XULIAN',
  13: 'RUG',
  14: 'ILIENS',
  15: 'FUCKY',
  16: 'CZ',
  17: 'BAGS',
  18: 'ANSEM',
  19: 'TATE',
  20: 'PUMP',
  21: 'KOBE',
  22: 'HAPPY',
  23: 'SCHIZO',
  24: 'SELL',
  25: 'BIGBEN',
  26: 'CATNIP',
  27: 'HBOOST',
  28: 'SUCKY',
  29: 'GUP',
  30: 'FARMED',
  31: 'GPT',
  32: 'PURRPS',
  33: 'BID',
  34: 'HODL',
  35: 'VEGAS',
  36: 'ASI',
  37: 'VAPOR',
  38: 'PANDA',
  39: 'PILL',
  40: 'ADHD',
  41: 'FUN',
  42: 'LADY',
  43: 'MOG',
  44: 'HPEPE',
  45: 'JEET',
  46: 'DROP',
  47: 'MBAPPE',
  48: 'TEST',
  49: 'RAGE',
  50: 'FRAC',
  51: 'ATEHUN',
  52: 'COZY',
  53: 'ARI',
  54: 'WASH',
  55: 'ANT',
  56: 'NFT',
  57: 'RICH',
  58: 'LORA',
  59: 'CATBAL',
  60: 'TJIF',
  61: 'GUESS',
  62: 'MAXI',
  63: 'NMTD',
  64: 'HPUMP',
  65: 'PIGEON',
  66: 'RISE',
  67: 'CINDY',
  68: 'CHINA',
  69: 'STACK',
  70: 'FRIED',
  72: 'NOCEX',
  73: 'RANK',
  74: 'OMNIX',
  75: 'RIP',
  76: 'G',
  77: 'BOZO',
  78: 'SPH',
  79: 'SHOE',
  80: 'MONAD',
  81: 'HOPE',
  82: 'BUSSY',
  83: 'FATCAT',
  84: 'SHREK',
  85: 'PIP',
  86: 'LQNA',
  87: 'NASDAQ',
  88: 'YEETI',
  89: 'SYLVI',
  90: 'FEIT',
  91: 'FRUDO',
  92: 'VIZN',
  93: 'STRICT',
  94: 'AUTIST',
  95: 'MAGA',
  96: 'HGOD',
  97: 'LIQUID',
  99: 'EARTH',
  100: 'UP',
  101: 'NIGGO',
  102: 'HOP',
  103: 'LUCKY',
  104: 'COPE',
  105: 'HPYH',
  106: 'YAP',
  107: 'HYPE',
  108: 'CHEF',
  109: 'WOW',
  110: 'STEEL',
  111: 'RETARD',
  112: 'MEOW',
  113: 'NEIRO',
  114: 'PEAR',
  115: 'HOLD',
  116: 'MUNCH',
  117: 'BERA',
  118: 'GENESY',
  119: 'BUBZ',
  120: 'PICKL',
  121: 'SHEEP',
  122: 'LAUNCH',
  123: 'FARM',
  124: 'FLASK',
  125: 'VAULT',
  126: 'CAT',
  127: 'HYENA',
  128: 'DEPIN',
  129: 'MON',
  130: 'BEATS',
  131: 'ORA',
  132: 'LIQD',
  133: 'H',
  134: 'STAR',
  135: 'SENT',
  136: 'SOLV',
  137: 'FLY',
  138: 'TIME',
  139: 'SOVRN',
  140: 'HWTR',
  141: 'GOD',
  142: 'UBTC',     // BTC
  143: 'HEAD',
  145: 'VORTX',
  146: 'DEFIN',
  147: 'JPEG',
  148: 'WHYPI',
  150: 'USDE',     // SDE
  151: 'UETH',     // ETH
  152: 'USDXL',    // SDXL
  153: 'FEUSD',
  155: 'QUANT',
  156: 'USOL',     // SOL
  157: 'RAT',
  158: 'TILT',
  159: 'TREND',
  160: 'BUDDY',
  161: 'PRFI',
  162: 'UFART',    // FART
  163: 'FUND',
  164: 'DIABLO',
  165: 'PENIS',
  166: 'USDT0',    // SDT0
  170: 'PEG',
  171: 'USH',      // SH
  172: 'COOK',
  173: 'RUB',
  174: 'ANON',
  175: 'FRCT',
  176: 'PERP',
  177: 'PURRO',
  178: 'USR',      // SR
  179: 'OTTI',
  180: 'USDHL',    // SDHL
  182: 'XAUT0',
  183: 'HORSY',
  184: 'HPENGU',
  185: 'ISLAND',
  187: 'LICKO',
  188: 'UPUMP',    // PUMP
  189: 'USPYX',    // SPYX
  190: 'STLOOP',
  191: 'TRADE',
  192: 'ANZ',
  193: 'UUUSPX',   // UUSPX
  194: 'UBONK',    // BONK
  195: 'LATINA',
  196: 'APU',
  198: 'WOULD',
  199: 'EX',
  200: 'UMOG',     // MOG
  201: 'HREKT',
  202: 'KITTY',
  203: 'DBLN',
  204: 'VSN',
  205: 'THBILL',
  206: 'UENA',     // ENA
  208: 'LTHREE',
  210: 'UXPL',     // XPL
  211: 'BAYC',
  213: 'LINK0',
  214: 'WMNT',
  215: 'SLAY',
  216: 'REI',
  217: 'RZR',
  218: 'REX',
  219: 'BRIDGE',
  223: 'PUP',
  224: 'UWLD',     // WLD
  225: 'FLR',
  226: 'AVAX0',
  227: 'AAVE0',
  228: 'UDZ',      // DZ
  230: 'USDH',     // SDH
  231: 'UPHL',     // PHL
  236: 'KEI',
  237: 'WAR',
  238: 'XION',
  240: 'KITTEN',
  241: 'HWAVE',
  242: 'SWAP',
  243: 'UMON',     // MON
  245: 'NBT',
  246: 'IZEC',
  247: 'FI',
  248: 'BZEC',
  249: 'RISK',
  251: 'MMOVE',
  253: 'CREAM',
  256: 'SEDA',
  257: 'UMEGA',    // MEGA
  258: 'STABLE',
  259: 'CASH',
  260: 'XMR1',
  261: 'HAR'
};

// Mapping inverse: token name -> spot index
const TOKEN_TO_INDEX = Object.fromEntries(
  Object.entries(HYPERLIQUID_TOKENS).map(([index, token]) => [token, parseInt(index)])
);

// Tokens principaux pour le vault (avec leurs symboles simplifiés)
const MAIN_TOKENS = {
  'HYPE': { index: 107, symbol: 'HYPE', name: 'Hyperliquid' },
  'UBTC': { index: 142, symbol: 'BTC', name: 'Bitcoin' },
  'UETH': { index: 151, symbol: 'ETH', name: 'Ethereum' },
  'USDT': { index: -1, symbol: 'USDT', name: 'Tether' },  // -1 = pas de spot index (native)
  'USDC': { index: -1, symbol: 'USDC', name: 'USD Coin' }  // -1 = pas de spot index (native)
};

// Helper function: Get token name from spot index
function getTokenByIndex(index) {
  return HYPERLIQUID_TOKENS[index] || `@${index}`;
}

// Helper function: Get spot index from token name
function getIndexByToken(tokenName) {
  return TOKEN_TO_INDEX[tokenName] || null;
}

// Helper function: Format token display name (enlève le U prefix pour les wrapped tokens)
function formatTokenName(token) {
  // Si c'est un token wrapped (commence par U), retourne le nom sans U
  if (token.startsWith('U') && token.length > 1) {
    const unwrapped = token.slice(1);
    // Mais garde le U si c'est un vrai nom de token (comme UP, UMOG qui ne sont pas des wrapped)
    const knownUnwrapped = ['BTC', 'ETH', 'SOL', 'FART', 'PUMP', 'SPX', 'BONK', 'MOG', 'ENA', 'XPL', 'WLD', 'DZ', 'SDH', 'PHL', 'MON', 'MEGA'];
    if (knownUnwrapped.includes(unwrapped)) {
      return unwrapped;
    }
  }
  return token;
}

// Export for CommonJS (Node.js)
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    HYPERLIQUID_TOKENS,
    TOKEN_TO_INDEX,
    MAIN_TOKENS,
    getTokenByIndex,
    getIndexByToken,
    formatTokenName
  };
}

// Export for ES modules (if needed)
if (typeof exports !== 'undefined') {
  exports.HYPERLIQUID_TOKENS = HYPERLIQUID_TOKENS;
  exports.TOKEN_TO_INDEX = TOKEN_TO_INDEX;
  exports.MAIN_TOKENS = MAIN_TOKENS;
  exports.getTokenByIndex = getTokenByIndex;
  exports.getIndexByToken = getIndexByToken;
  exports.formatTokenName = formatTokenName;
}